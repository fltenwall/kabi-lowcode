var t=Object.defineProperty,e=Object.defineProperties,o=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,l=(e,o,n)=>o in e?t(e,o,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[o]=n,a=(t,e)=>{for(var o in e||(e={}))s.call(e,o)&&l(t,o,e[o]);if(n)for(var o of n(e))r.call(e,o)&&l(t,o,e[o]);return t},i=(t,n)=>e(t,o(n));import{d as p,_ as u,c as d,r as c,a as h,u as m,m as v,b as f,e as g,f as y,n as C,h as b,i as w,K as x,o as S,g as _,j as P,B as k,I as j,R as D,C as L,T as $,F as O,S as E,L as z,V as I}from"./vendor.c46d087a.js";var M=p({components:{colorPicker:u},props:{Props:{type:Object,required:!0}},setup(){const t=m(Q);return{store:t,setProps:(e,o)=>{const n={key:o,value:e};t.dispatch("setCurrProps",n)},changeStyle:(e,o)=>{const n={};n[o]=+e,t.dispatch("setCurrStyles",n)}}},render(){return d(c("a-form"),{labelCol:{span:10},wrapperCol:{span:14}},{default:()=>[d(c("a-form-item"),{label:"按钮文案"},{default:()=>{var t;return[d(c("a-input"),{onInput:t=>{this.setProps(t.target.value,"label")},value:null==(t=this.Props)?void 0:t.label},null)]}}),d(c("a-form-item"),{label:"按钮字体大小"},{default:()=>{var t,e;return[d(c("a-input"),{onInput:t=>{this.changeStyle(t.target.value,"fontSize")},value:null==(e=null==(t=this.Props)?void 0:t.styles)?void 0:e.fontSize},null)]}}),d(c("a-form-item"),{label:"按钮字体粗细"},{default:()=>{var t,e;return[d(c("a-select"),{onChange:t=>this.changeStyle(t,"fontWeight"),value:null==(e=null==(t=this.Props)?void 0:t.styles)?void 0:e.fontWeight},{default:()=>[d(c("a-select-option"),{value:"200"},{default:()=>[h("200")]}),d(c("a-select-option"),{value:"300"},{default:()=>[h("300")]}),d(c("a-select-option"),{value:"400"},{default:()=>[h("400")]}),d(c("a-select-option"),{value:"500"},{default:()=>[h("500")]}),d(c("a-select-option"),{value:"600"},{default:()=>[h("600")]}),d(c("a-select-option"),{value:"800"},{default:()=>[h("800")]})]})]}}),d(c("a-form-item"),{label:"按钮类型"},{default:()=>{var t;return[d(c("a-select"),{onChange:t=>this.setProps(t,"type"),value:null==(t=this.Props)?void 0:t.type},{default:()=>[d(c("a-select-option"),{value:"primary"},{default:()=>[h("主要按钮")]}),d(c("a-select-option"),{value:"success"},{default:()=>[h("成功按钮")]}),d(c("a-select-option"),{value:"default"},{default:()=>[h("默认按钮")]}),d(c("a-select-option"),{value:"warning"},{default:()=>[h("警告按钮")]}),d(c("a-select-option"),{value:"danger"},{default:()=>[h("危险按钮")]})]})]}})]})}}),R=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:M}),T=p({props:{Props:{type:Object,required:!0}},setup(){const t=m(Q);return{store:t,setProps:(e,o)=>{const n={key:o,value:e};t.dispatch("setCurrProps",n)},changeStyle:(e,o)=>{const n={};n[o]=+e,t.dispatch("setCurrStyles",n)}}},render(){return d(c("a-form"),{labelCol:{span:10},wrapperCol:{span:14}},{default:()=>[d(c("a-form-item"),{label:"图片链接"},{default:()=>[d(c("a-input"),{value:this.Props.src,onInput:t=>{this.setProps(t.target.value,"src")}},null)]})]})}}),B=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:T});var X=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",buttonProperty:{v_id:"",name:"v-button",label:"按钮",type:"primary",styles:{width:58,height:42,top:0,left:0}},createbuttonProp:(t,e,o)=>({v_id:t,name:"v-button",label:"按钮",type:"primary",styles:{width:60,height:42,top:o,left:e,fontSize:14,color:"#fff",fontWeight:400}})});var Y=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",createimageProp:(t,e,o)=>({v_id:t,name:"v-image",src:"https://gitee.com/meng_jiawei/pic-sea/raw/master/img/下载.jpg",styles:{width:100,height:100,top:o,left:e}})});var q=p({name:"v-button",props:{v_id:{type:String},type:{type:String,default:"primary"},label:{type:String,default:"按钮"},styles:{type:Object,required:!0}},render(){const{$props:t}=this,e=a({},t.styles);e.width=e.width+"px",e.height=e.height+"px";const o=function(t){return{fontSize:`${t.fontSize}px`,color:`${t.color}`,fontWeight:t.fontWeight}}(e);return d("div",{"data-index":"v-button",style:i(a({},e),{position:"absolute"})},[d(c("van-button"),v({style:a({width:"100%",height:"100%"},o)},t),{default:()=>[t.label]})])}}),A=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:q}),W=p({name:"v-image",props:{v_id:{type:String},type:{type:String,default:"primary"},src:{type:String,required:!0},styles:{type:Object,required:!0}},render(){const{$props:t}=this,e=a({},t.styles);return e.width=e.width+"px",e.height=e.height+"px",d("div",{"data-index":"v-image",style:i(a({},e),{position:"absolute"})},[d("img",v({style:a({},e),draggable:"false"},this.$props,{src:this.src}),null)])}});const K={"../components/button/index.tsx":A,"../components/image/index.tsx":Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:W})},V={"../props/button.ts":X,"../props/image.ts":Y},F={"../components/button/button.props.tsx":R,"../components/image/image.props.tsx":B},G={},H={};const J=(()=>{for(const t in F){const e=t.replace(/\.\.\/components\/(.*)\/(.*)\.props\.tsx/,"$1");H[`v-${e}`]=`v-${e}-props`}return H})(),N=(()=>{for(const t in V){const e=t.replace(/\.\.\/props\/(.*)\.ts/,"$1");if(!Reflect.has(V[t],`create${e}Prop`))throw new Error(`please define create function in ${e}.ts`);G[`v-${e}`]=V[t][`create${e}Prop`]}return G})(),Q=Symbol(),U=f({state:{BaseComponents:N,ComponentList:[],CurrComponent:{},right:!1,RightProps:J},mutations:{addComponent(t,e){t.ComponentList.push(e)},setCurrProps(t,e){t.ComponentList.find((e=>(null==e?void 0:e.v_id)===t.CurrComponent.v_id))[e.key]=e.value},setCurrStyles(t,e){const o=t.ComponentList.find((e=>(null==e?void 0:e.v_id)===t.CurrComponent.v_id));o.styles=a(a({},o.styles),e)},setCurrComponent(t,e){t.CurrComponent=a({},e)},setRight(t,e){t.right=e},deleteComponent(t,e){t.ComponentList=t.ComponentList.filter((t=>t.v_id!==e))}},actions:{addComponent(t,e){t.commit("addComponent",e),t.commit("setCurrComponent",{key:e.name,v_id:e.v_id})},setCurrProps(t,e){t.commit("setCurrProps",e)},setCurrStyles(t,e){t.commit("setCurrStyles",e)},setCurrComponent(t,e){t.commit("setCurrComponent",e)},setRight(t,e){t.commit("setRight",e)},deleteComponent(t,e){t.commit("setCurrComponent",{}),t.commit("deleteComponent",e)}}});var Z=p({name:"shape",props:{property:{type:Object,required:!0}},setup(t){const e=m(Q),o=e.state.CurrComponent,n=g(!1),s=y({top:0,left:0}),{deleteComponent:r}=(()=>{const t=m(Q);return{deleteComponent:e=>{t.dispatch("deleteComponent",e)}}})();return{left:t=>{console.log("删除了")},handleCircleShape:t=>{const e=[],o={name:"tm",left:Math.round(t.width/2),top:0},n={name:"rt",left:t.width,top:0},s={name:"lm",left:0,top:Math.round(t.height/2)},r={name:"lb",left:0,top:t.height},l={name:"bm",left:Math.round(t.width/2),top:t.height},a={name:"rb",left:t.width,top:t.height},i={name:"rm",left:t.width,top:Math.round(t.height/2)};return e.push({name:"lt",left:0,top:0},o,n,s,r,l,a,i),e},DotmouseDown:o=>{const n=window.event;n.stopPropagation();const s=t.property.styles.top,r=t.property.styles.left,l=t.property.styles.height,a=t.property.styles.width,i=n.clientX,p=n.clientY,u=t=>{const n=t.clientX,u=t.clientY;let d={};switch(o){case"lt":d={top:u-p+s,left:n-i+r,width:i-n+a,height:p-u+l};break;case"tm":d={top:u-p+s,height:p-u+l};break;case"rt":d={top:u-p+s,width:n-i+a,height:p-u+l};break;case"lm":d={width:i-n+a,left:n-i+r};break;case"lb":d={left:n-i+r,width:i-n+a,height:u-p+l};break;case"bm":d={height:u-p+l};break;case"rb":d={height:u-p+l,width:n-i+a};break;case"rm":d={width:n-i+a}}d.width&&(d.width=d.width<0?-d.width:d.width),d.height&&(d.height=d.height<0?-d.height:d.height),e.dispatch("setCurrStyles",d)},d=t=>{t.stopPropagation(),document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",d)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",d)},setCurrComponent:()=>{},mouseDown:o=>{o.preventDefault(),o.stopPropagation(),e.dispatch("setRight",!1),e.dispatch("setCurrComponent",{key:t.property.name,v_id:t.property.v_id}),console.log("fhiahfiah");const n=t.property.styles.top,s=t.property.styles.left,r=o.clientX,l=o.clientY,a=t=>{const o=t.clientX,a=t.clientY,i={left:o-r+s,top:a-l+n};(function(t){const e=document.getElementById("contain").getBoundingClientRect();return t.clientX>e.x&&t.clientY>e.y&&e.x+e.width>t.clientX&&e.y+e.height>t.clientY})(t)&&e.dispatch("setCurrStyles",i)},i=()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseup",i)};document.addEventListener("mousemove",a),document.addEventListener("mouseup",i)},rightClick:t=>{t.preventDefault(),s.left=t.offsetX,s.top=t.offsetY,e.dispatch("setRight",!0),n.value=!0},deleteComponent:r,active:o,store:e,right:n,rightStyle:s}},render(){const t=this.handleCircleShape(this.property.styles),e=function(t){return{width:`${t.width}px`,height:`${t.height}px`,top:`${t.top}px`,left:`${t.left}px`}}(this.property.styles);return d("div",{onContextmenu:this.rightClick,onMousedown:this.mouseDown,class:"border-line hover",style:i(a({},e),{position:"absolute"})},[this.$slots.default(),this.store.state.right&&this.store.state.CurrComponent.v_id==this.property.v_id?d("ul",{style:{top:this.rightStyle.top+5+"px",left:this.rightStyle.left+5+"px",position:"absolute",zIndex:9999}},[d("li",{onMousedown:t=>{t.preventDefault(),t.stopPropagation(),this.deleteComponent(this.property.v_id)},class:"menu-item"},[h("删除")])]):null,t.map((t=>d("div",{onMousedown:()=>this.DotmouseDown(t.name),style:{top:t.top-2+"px",left:t.left-2+"px",position:"absolute"},class:this.store.state.CurrComponent.v_id==this.property.v_id?"circle-shape":""},null)))])}});var tt=p({components:{Shape:Z},setup(){const t=m(Q),e=t.state.ComponentList;return C((()=>{var e;null==(e=document.getElementById("mid"))||e.addEventListener("click",(e=>{var o,n;e.preventDefault(),e.stopPropagation(),(null==(o=e.target)?void 0:o.getAttribute("v_id"))||(null==(n=e.target)?void 0:n.classList.contains("circle-shape"))||(t.dispatch("setRight",!1),t.dispatch("setCurrComponent",""))}))})),{store:t,handleDrop:e=>{var o;e.preventDefault(),e.stopPropagation();const n=null==(o=e.dataTransfer)?void 0:o.getData("key"),s=function(){const t=document.getElementById("contain").getBoundingClientRect();return{left:t.x,top:t.y}}(),r=t.state.BaseComponents[n](e.clientX-s.left,e.clientY-s.top);r.styles.top=e.clientY-s.top,r.styles.left=e.clientX-s.left,r.v_id=`v_${(new Date).getTime()}`,t.dispatch("addComponent",r)},allowDrop:t=>{t.preventDefault()},list:e}},render(){return d("div",{class:"box-height",id:"contain",onDragover:this.allowDrop,onDrop:this.handleDrop,style:{backgroundColor:"#fff",width:"414px",overflowX:"hidden",overflowY:"visible",position:"relative"}},[this.store.state.ComponentList.map((t=>{let e;return d(Z,{property:t},"function"==typeof(o=e=b(c(t.name),i(a({},t),{draggable:!1})))||"[object Object]"===Object.prototype.toString.call(o)&&!w(o)?e:{default:()=>[e]});var o}))])}}),et=p({components:{KeepAlive:x,ButtonPropBlock:M},setup(){const t=m(Q);return{store:t,changeStyle:(e,o)=>{const n={};n[o]=+e.target.value,t.dispatch("setCurrStyles",n)}}},render(){const t=this.store.state.ComponentList.find((t=>t.v_id==this.store.state.CurrComponent.v_id));return d("div",null,[d(c("a-form"),{labelCol:{span:10},wrapperCol:{span:14}},{default:()=>[d(c("a-form-item"),{label:"距容器上方距离"},{default:()=>{var e;return[d(c("a-input"),{onInput:t=>{this.changeStyle(t,"top")},value:null==(e=null==t?void 0:t.styles)?void 0:e.top},null)]}}),d(c("a-form-item"),{label:"距容器左侧距离"},{default:()=>{var e;return[d(c("a-input"),{onInput:t=>{this.changeStyle(t,"left")},value:null==(e=null==t?void 0:t.styles)?void 0:e.left},null)]}}),d(c("a-form-item"),{label:"容器宽度"},{default:()=>{var e;return[d(c("a-input"),{onInput:t=>{this.changeStyle(t,"width")},value:null==(e=null==t?void 0:t.styles)?void 0:e.width},null)]}}),d(c("a-form-item"),{label:"容器高度"},{default:()=>{var e;return[d(c("a-input"),{onInput:t=>{this.changeStyle(t,"height")},value:null==(e=null==t?void 0:t.styles)?void 0:e.height},null)]}})]}),b(c(this.store.state.RightProps[this.store.state.CurrComponent.key]),{Props:t})])}}),ot=p({components:{ComponentProp:et},setup(){const t=m(Q),e=g(0);return{store:t,active:e,chooseTag:t=>{e.value=t}}},render(){return console.log(this.store.state.CurrComponent,"当前选中组建"),d("div",{class:"box-height",style:{backgroundColor:"#fff",width:"100%",overflow:"auto",display:"relative"}},[d("div",{class:"tags-contain"},[d("div",{class:0==this.active?"active tag":"tag",onClick:()=>this.chooseTag(0)},[h("属性")]),d("div",{class:1==this.active?"active tag":"tag",onClick:()=>this.chooseTag(1)},[h("事件")])]),this.store.state.CurrComponent.v_id?d(et,null,null):d("div",{style:{textAlign:"center"}},[h("请先选中组件!!")])])}});const nt=[{name:"按钮",key:"v-button",icon:"https://gitee.com/meng_jiawei/pic-sea/raw/master/img/20210630193357.svg"},{name:"图片",key:"v-image",icon:"https://gitee.com/meng_jiawei/pic-sea/raw/master/img/20210630194641.svg"}];var st=p({render:()=>d("div",{style:{backgroundColor:"#fff"},class:"box-height"},[d("div",{style:{textAlign:"center",fontSize:"20px",padding:"10px"}},[h("组件库")," ",d("span",{style:{fontSize:"12px"}},[h("❓拖拽组件至中间即可使用")])]),d("div",{style:{display:"flex",flexDirection:"row",flexWrap:"wrap"}},[nt.map((t=>d("div",{class:"flex hover",style:{marginTop:"3px",width:"30%",height:"100px"}},[d("div",{draggable:!0,"data-index":t.key,style:{width:"80px",height:"80px",borderRadius:"5px"},class:"color-grey flex"},[d("img",{width:"30",height:"30",src:t.icon,alt:""},null),t.name])])))])])}),rt=p({name:"index",components:{VisualPhone:tt,RightBlock:ot,LeftComponent:st},setup(){const t=g("11"),e=m(Q),o=g(!1);return{handleDragStart:t=>{var e,n;o.value=!0,null==(n=t.dataTransfer)||n.setData("key",null==(e=t.target)?void 0:e.dataset.index)},list:e.state.ComponentList,value:t}},render(){return d(c("a-layout"),null,{default:()=>[d(c("a-layout-header"),null,{default:()=>[d(c("a-row"),null,{default:()=>[d(c("a-col"),{span:8,style:{display:"flex",alignItems:"center"}},{default:()=>[d("img",{width:"60",src:"/kabi-lowcode/assets/icon.04ad134f.svg",alt:""},null),d("span",{style:{color:"#fff",fontSize:"24px"}},[h("卡比Low Code")])]}),d(c("a-col"),{span:8},null),d(c("a-col"),{span:8},null)]})]}),d("div",null,[d(c("a-row"),null,{default:()=>[d(c("a-col"),{span:5,onDragstart:this.handleDragStart},{default:()=>[d(st,null,null)]}),d(c("a-col"),{style:{backgroundColor:"#f5f5f5"},span:14},{default:()=>[d("div",{id:"mid",style:{width:"100%",display:"flex",justifyContent:"center"}},[d(tt,null,null)])]}),d(c("a-col"),{span:5},{default:()=>[d(ot,null,null)]})]})])]})}}),lt=p({name:"App",components:{Main:rt},setup(){const t=m(Q);var e;null==(e=document.getElementById("app"))||e.addEventListener("click",(e=>{var o,n;e.preventDefault(),e.stopPropagation(),(null==(o=e.target)?void 0:o.getAttribute("v_id"))||(null==(n=e.target)?void 0:n.classList.contains("circle-shape"))||t.dispatch("setRight",!1)}));return{drag:g(!1)}}});lt.render=function(t,e,o,n,s,r){const l=c("Main");return S(),_(l)};const at=P(lt);(t=>{var e;for(const o in F){const n=o.replace(/\.\.\/components\/(.*)\/(.*)\.props\.tsx/,"$1");t.component(`v-${n}-props`,(null==(e=F[o])?void 0:e.default)||K[o]),H[`v-${n}`]=`v-${n}-props`}})(at),function(t){var e;for(const o in K){const n=o.replace(/\.\.\/components\/(.*)\/index.tsx/,"$1");t.component(`v-${n}`,(null==(e=K[o])?void 0:e.default)||K[o])}}(at),at.use(k).use(j).use(D).use(L).use($).use(O).use(E).use(z),at.use(I),at.use(U,Q),at.mount("#app");
